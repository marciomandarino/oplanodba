========================================================================================
== Aula: Instalando Oracle Free 23ai no Oracle Linux 9
== Nome do autor: Marcio Mandarino
== Data da geraÃ§Ã£o: 05/05/2025
== https://www.linkedin.com/in/marciomandarino/
== https://mrdba.com.br/oracle_fundamentals/
========================================================================================


========================================================================================
== ðŸŽ¯ Conceitos Gerais 
========================================================================================
â–¶ï¸ O Oracle Database 23ai Free Edition Ã© EdiÃ§Ã£o gratuita baseada no Oracle 23ai, para testes e desenvolvimento
â–¶ï¸ Voltada para DBAs, devs e estudantes que querem praticar sem custo.
â–¶ï¸ Inclui recursos avanÃ§ados com uso restrito e sem licenÃ§a comercial.
â–¶ï¸ Vantagens para DBAs
	â–«ï¸ Ideal para montar laboratÃ³rios de estudo e certificaÃ§Ã£o.
	â–«ï¸ Permite testar features novas antes de usar em produÃ§Ã£o.
	â–«ï¸ Suporte ao Multitenant com 1 CDB e atÃ© 3 PDBs.
	â–«ï¸ Funciona em Linux, Windows e mÃ¡quinas virtuais.
â–¶ï¸ LimitaÃ§Ãµes
	â–«ï¸ Limitado a 1 CPU e 2 GB de RAM.
	â–«ï¸ MÃ¡ximo de 12 GB de dados por PDB.
	â–«ï¸ Sem suporte tÃ©cnico oficial da Oracle.


========================================================================================
== ðŸŽ¯ ReferÃªncias 
========================================================================================
https://www.oracle.com/database/free/
https://docs.oracle.com/en/database/oracle/oracle-database/index.html

# Database Free Installation Guide for Linux 
https://docs.oracle.com/en/database/oracle/oracle-database/23/xeinl/index.html

# What's New
https://docs.oracle.com/en/database/oracle/oracle-database/23/nfcoa/index.html

# Download
https://www.oracle.com/database/free/get-started/

========================================================================================
== ðŸŽ¯ VerificaÃ§Ãµes iniciais 
========================================================================================
ðŸ’¡ Fique atento se a versÃ£o que vocÃª estÃ¡ fazendo download Ã© compatÃ­vel com a o seu SO
ðŸ’¡ Baixe sempre a versÃ£o mais recente do Oracle


# cat /etc/oracle-release
# free -m
# lscpu
# df -h



========================================================================================
== ðŸŽ¯ Verificar arquivo host (nome da mÃ¡quina e IP)
========================================================================================
# cat /etc/hosts
# echo "$(hostname -I | awk '{print $1}') $(hostname | cut -d'.' -f1) $(hostname)" >> /etc/hosts
# cat /etc/hosts


========================================================================================
== ðŸŽ¯ Desabilitar SELINUX
========================================================================================
# grep -E '^SELINUX=(disabled|enforcing)$' /etc/selinux/config
# sed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config
# grep -E '^SELINUX=(disabled|enforcing)$' /etc/selinux/config


========================================================================================
== ðŸŽ¯ Desabilitar Firewall
========================================================================================
# systemctl stop firewalld
# systemctl disable firewalld


========================================================================================
== ðŸŽ¯ Instalar pacotes adicionais
========================================================================================
# dnf install -y mlocate net-tools glibc-all-langpacks langpacks-en wget vim


========================================================================================
== ðŸŽ¯ Atualizar pacotes do sistema operacional
========================================================================================
# dnf update -y


========================================================================================
== ðŸŽ¯ Instalar oracle-database-preinstall-23ai
========================================================================================
# dnf -y install oracle-database-preinstall-23ai


========================================================================================
== ðŸŽ¯ Baixar o Oracle Free 23ai
========================================================================================
# curl -L -o /tmp/oracle-database-free-23ai-23.8-1.el9.x86_64.rpm https://download.oracle.com/otn-pub/otn_software/db-free/oracle-database-free-23ai-23.8-1.el9.x86_64.rpm



========================================================================================
== ðŸŽ¯ Instalar o Oracle Free 23ai
========================================================================================
# dnf -y localinstall /tmp/oracle-database-free-23ai-23.8-1.el9.x86_64.rpm
# rm -rf /tmp/oracle-database-free-23ai-23.8-1.el9.x86_64.rpm


========================================================================================
== ðŸŽ¯ Ajustar local de criaÃ§Ã£o do banco de dados
========================================================================================
# cat /etc/sysconfig/oracle-free-23ai.conf
# sed -i 's|DBFILE_DEST=|DBFILE_DEST=/oradata|' /etc/sysconfig/oracle-free-23ai.conf
# cat /etc/sysconfig/oracle-free-23ai.conf


========================================================================================
== ðŸŽ¯ PermissÃµes do diretÃ³rio /oradata
========================================================================================
# mkdir -p /oradata
# chown -R oracle.oinstall /oradata/


========================================================================================
== ðŸŽ¯ Criar o banco de dados
========================================================================================
# (echo "Welcome1"; echo "Welcome1";) | /etc/init.d/oracle-free-23ai configure


========================================================================================
== ðŸŽ¯ Usar oraenv para definir variÃ¡veis de ambiente
========================================================================================
# sudo su - oracle
$ . oraenv


========================================================================================
== ðŸŽ¯ Verificar banco de dados criado
========================================================================================
$ sqlplus / as sysdba

SQL> set lines 1200
SQL> col INSTANCE_NAME format a20
SQL> col HOST_NAME format a20
SQL> col VERSION_FULL format a20
SQL> col STATUS format a10
SQL> col DATABASE_STATUS format a20
SQL> col EDITION format a10

SQL> SELECT INSTANCE_NAME, HOST_NAME, VERSION_FULL, STARTUP_TIME, STATUS, LOGINS, DATABASE_STATUS, EDITION FROM v$instance;


========================================================================================
== ðŸŽ¯ Boas prÃ¡ticas
========================================================================================
ðŸ’¡ Sempre configure corretamente o arquivo /etc/hosts para evitar problemas de rede.
ðŸ’¡ Desabilitar SELinux e firewall reduz conflitos com o Oracle, especialmente em ambientes de testes.
ðŸ’¡ Use o `oracle-database-preinstall-23ai` para preparar o sistema com os parÃ¢metros ideais.
ðŸ’¡ ApÃ³s a instalaÃ§Ã£o, valide a criaÃ§Ã£o do banco com uma consulta no v$instance.
ðŸ’¡ Mantenha o diretÃ³rio de dados fora da estrutura padrÃ£o, como /oradata, para facilitar backups e manutenÃ§Ã£o.


========================================================================================
== ðŸ“Ž Anexos
========================================================================================
DiretÃ³rios e finalidades na instalaÃ§Ã£o do Oracle Free 23ai:

| File Name and Location                                 | Purpose                                                                 |
|--------------------------------------------------------|-------------------------------------------------------------------------|
| /opt/oracle                                            | Oracle base: raiz da instalaÃ§Ã£o do Oracle Free                         |
| /opt/oracle/product/23ai/dbhomeFree                    | Oracle home: binÃ¡rios, executÃ¡veis e arquivos de rede                  |
| /oradata/FREE                               		 	 | Arquivos de dados                                                      |
| /opt/oracle/diag/...                                   | Logs de diagnÃ³stico (alerta: trace/alert_FREE.log)                     |
| /opt/oracle/cfgtoollogs/dbca/FREE                      | Log da criaÃ§Ã£o do banco de dados (FREE.log)                            |
| /etc/sysconfig/oracle-free-23ai.conf                   | ParÃ¢metros padrÃ£o de configuraÃ§Ã£o do Oracle                            |
| /etc/init.d/oracle-free-23ai                           | Script de configuraÃ§Ã£o e inicializaÃ§Ã£o do serviÃ§o Oracle               |

========================================================================================
== ðŸ“„ Consultas auxiliares
========================================================================================
$ ps -ef | grep [p]mon | awk '{print $NF}' | sed 's/ora_pmon_//'

SQL> SELECT name, open_mode, log_mode FROM v$database;
SQL> SELECT file_name, tablespace_name FROM dba_data_files;